name: "Android emulator"
on:
  workflow_dispatch:
env:
  DEBIAN_FRONTEND: noninteractive
  TZ: Asia/Jakarta
  NTFY: ${{ secrets.NTFY }}
jobs:
  launch_instance:
    runs-on: ubuntu-latest
    steps:
      - name: Enable KVM
        run: |
          echo 'KERNEL=="kvm", GROUP="kvm", MODE="0666", OPTIONS+="static_node=kvm"' | sudo tee /etc/udev/rules.d/99-kvm4all.rules
          sudo udevadm control --reload-rules
          sudo udevadm trigger --name-match=kvm
      - uses: awalsh128/cache-apt-pkgs-action@latest
        with:
          packages: acl adduser adoptium-ca-certificates adwaita-icon-theme alsa-topology-conf alsa-ucm-conf ant-optional ant apache2-bin apache2-data apache2-utils apache2 apparmor apport-symptoms apport apt-transport-https apt-utils apt aria2 aspnetcore-runtime-6.0 aspnetcore-runtime-7.0 aspnetcore-runtime-8.0 aspnetcore-targeting-pack-6.0 aspnetcore-targeting-pack-7.0 aspnetcore-targeting-pack-8.0 autoconf automake autotools-dev azure-cli base-files base-passwd bash-completion bash bc bcache-tools bind9-dnsutils bind9-host bind9-libs binfmt-support binutils-common binutils-x86-64-linux-gnu binutils bison bolt brotli bsdextrautils bsdutils btrfs-progs build-essential buildah busybox-initramfs busybox-static byobu bzip2 ca-certificates-mono ca-certificates catatonit cgroup-tools chrony cifs-utils clang-13 clang-14 clang-15 clang-format-13 clang-format-14 clang-format-15 clang-tidy-13 clang-tidy-14 clang-tidy-15 clang-tools-13 clang-tools-14 clang-tools-15 cloud-guest-utils cloud-init cloud-initramfs-copymods cloud-initramfs-dyn-netconf command-not-found conmon console-setup-linux console-setup containerd.io containernetworking-plugins coreutils cpio cpp-10 cpp-11 cpp-12 cpp-13 cpp-9 cpp cron crun cryptsetup-bin cryptsetup-initramfs cryptsetup curl dash dbus-user-session dbus dconf-gsettings-backend dconf-service debconf-i18n debconf debianutils debugedit dictionaries-common diffutils dirmngr distro-info-data distro-info dmeventd dmidecode dmsetup dns-root-data dnsmasq-base dnsutils docker-ce-cli docker-ce docutils-common dosfstools dotnet-apphost-pack-6.0 dotnet-apphost-pack-7.0 dotnet-apphost-pack-8.0 dotnet-host dotnet-hostfxr-6.0 dotnet-hostfxr-7.0 dotnet-hostfxr-8.0 dotnet-runtime-6.0 dotnet-runtime-7.0 dotnet-runtime-8.0 dotnet-runtime-deps-8.0 dotnet-sdk-6.0 dotnet-sdk-7.0 dotnet-sdk-8.0 dotnet-targeting-pack-6.0 dotnet-targeting-pack-7.0 dotnet-targeting-pack-8.0 dpkg-dev dpkg e2fsprogs eatmydata ed efibootmgr eject emacsen-common ethtool fakeroot fdisk file finalrd findutils firebird3.0-common-doc firebird3.0-common firefox flex fontconfig-config fontconfig fonts-dejavu-core fonts-dejavu-extra fonts-dejavu fonts-lato fonts-liberation fonts-noto-color-emoji fonts-ubuntu-console freetds-common friendly-recovery ftp fuse-overlayfs fuse3 fwupd-signed g++-10 g++-11 g++-12 g++-13 g++-9 g++ gawk gcc-10-base gcc-10 gcc-11-base gcc-11 gcc-12-base gcc-12 gcc-13-base gcc-13 gcc-9-base gcc-9 gcc gconf2-common gdisk gettext-base gfortran-10 gfortran-11 gfortran-12 gfortran-13 gfortran-9 gfortran gh gir1.2-freedesktop gir1.2-gdkpixbuf-2.0 gir1.2-glib-2.0 gir1.2-packagekitglib-1.0 gir1.2-rsvg-2.0 gir1.2-secret-1 git-ftp git-lfs git-man git glib-networking-common glib-networking-services glib-networking gnupg-l10n gnupg-utils gnupg2 gnupg golang-github-containernetworking-plugin-dnsname golang-github-containers-common golang-github-containers-image google-chrome-stable google-cloud-cli gpg-agent gpg-wks-client gpg-wks-server gpg gpgconf gpgsm gpgv grep groff-base grub-common grub-efi-amd64-bin grub-efi-amd64-signed grub-gfxpayload-lists grub-pc-bin grub-pc grub2-common gsettings-desktop-schemas gsfonts-x11 gsfonts gtk-update-icon-cache gzip haveged hdparm heroku hicolor-icon-theme hostname htop humanity-icon-theme hunspell-en-us hwdata icewm-common icewm icu-devtools ieee-data imagemagick-6-common imagemagick-6.q16 imagemagick info init-system-helpers init initramfs-tools-bin initramfs-tools-core initramfs-tools install-info iproute2 iptables iputils-ping iputils-tracepath irqbalance isc-dhcp-client isc-dhcp-common iso-codes java-common javascript-common jq kbd keyboard-configuration keyutils klibc-utils kmod kpartx kubectl landscape-common less lib32gcc-s1 lib32stdc++6 lib32z1 libacl1 libaio1 libao-common libao4 libaom3 libapparmor1 libappstream4 libapr1 libaprutil1-dbd-sqlite3 libaprutil1-ldap libaprutil1 libapt-pkg6.0 libarchive13 libargon2-1 libaria2-0 libasan5 libasan6 libasan8 libasound2-data libasound2 libaspell15 libassuan0 libatasmart4 libatk-bridge2.0-0 libatk1.0-0 libatk1.0-data libatm1 libatomic1 libatspi2.0-0 libattr1 libaudit-common libaudit1 libauthen-sasl-perl libavahi-client3 libavahi-common-data libavahi-common3 libavahi-glib1 libbinutils libblas-dev libblas3 libblkid-dev libblkid1 libblockdev-crypto2 libblockdev-fs2 libblockdev-loop2 libblockdev-part-err2 libblockdev-part2 libblockdev-swap2 libblockdev-utils2 libblockdev2 libbpf0 libbrotli-dev libbrotli1 libbsd0 libburn4 libbz2-1.0 libbz2-dev libc++-14-dev libc++-dev libc++1-14 libc++abi-14-dev libc++abi-dev libc++abi1-14 libc-ares2 libc-bin libc-client2007e libc-dev-bin libc6-dev libc6-i386 libc6 libcairo-gobject2 libcairo-script-interpreter2 libcairo2-dev libcairo2 libcap-ng0 libcap2-bin libcap2 libcbor0.8 libcc1-0 libcgi-fast-perl libcgi-pm-perl libcgroup1 libclang-common-13-dev libclang-common-14-dev libclang-common-15-dev libclang-cpp13 libclang-cpp14 libclang-cpp15 libclang1-13 libclang1-14 libclang1-15 libclone-perl libcolord2 libcom-err2 libcommon-sense-perl libcrypt-dev libcrypt1 libcryptsetup12 libctf-nobfd0 libctf0 libcups2 libcurl3-gnutls libcurl4 libdata-dump-perl libdatrie1 libdav1d5 libdb5.3 libdbus-1-3 libdbus-glib-1-2 libdconf1 libde265-0 libdebconfclient0 libdeflate-dev libdeflate0 libdevmapper-event1.02.1 libdevmapper1.02.1 libdjvulibre-dev libdjvulibre-text libdjvulibre21 libdns-export1110 libdpkg-perl libdrm-amdgpu1 libdrm-common libdrm-intel1 libdrm-nouveau2 libdrm-radeon1 libdrm2 libdw1 libeatmydata1 libedit2 libefiboot1 libefivar1 libegl-mesa0 libegl1 libelf1 libenchant-2-2 libencode-locale-perl libepoxy0 liberror-perl libestr0 libevent-core-2.1-7 libevent-pthreads-2.1-7 libexif-dev libexif12 libexpat1-dev libexpat1 libext2fs2 libfakeroot libfastjson4 libfbclient2 libfcgi-bin libfcgi-perl libfcgi0ldbl libfdisk1 libffi-dev libffi8 libfftw3-double3 libfido2-1 libfile-listing-perl libfile-readbackwards-perl libflac8 libflashrom1 libfont-afm-perl libfontconfig-dev libfontconfig1-dev libfontconfig1 libfontenc1 libfreetype-dev libfreetype6-dev libfreetype6 libfribidi0 libfsverity0 libftdi1-2 libfuse3-3 libfwupd2 libfwupdplugin5 libgail-common libgail18 libgbm-dev libgbm1 libgc1 libgcab-1.0-0 libgcc-10-dev libgcc-11-dev libgcc-12-dev libgcc-13-dev libgcc-9-dev libgcc-s1 libgconf-2-4 libgcrypt20-dev libgcrypt20 libgd3 libgdbm-compat4 libgdbm6 libgdiplus libgdk-pixbuf-2.0-0 libgdk-pixbuf-2.0-dev libgdk-pixbuf-xlib-2.0-0 libgdk-pixbuf2.0-bin libgdk-pixbuf2.0-common libgfortran-10-dev libgfortran-11-dev libgfortran-12-dev libgfortran-13-dev libgfortran-9-dev libgfortran5 libgif7 libgirepository-1.0-1 libgl1-mesa-dri libgl1 libglapi-mesa libglib2.0-0 libglib2.0-bin libglib2.0-data libglib2.0-dev-bin libglib2.0-dev libglvnd0 libglx-mesa0 libglx0 libgmp-dev libgmp10 libgmpxx4ldbl libgnutls30 libgomp1 libgpg-error-dev libgpg-error0 libgpgme11 libgpm2 libgraphite2-3 libgsl-dev libgsl27 libgslcblas0 libgssapi-krb5-2 libgstreamer1.0-0 libgtk-3-0 libgtk-3-common libgtk2.0-0 libgtk2.0-bin libgtk2.0-common libgudev-1.0-0 libgusb2 libharfbuzz0b libhavege2 libheif1 libhogweed6 libhtml-form-perl libhtml-format-perl libhtml-parser-perl libhtml-tagset-perl libhtml-template-perl libhtml-tree-perl libhttp-cookies-perl libhttp-daemon-perl libhttp-date-perl libhttp-message-perl libhttp-negotiate-perl libhunspell-1.7-0 libhwasan0 libice-dev libice6 libicu-dev libicu70 libid3tag0 libidn2-0 libilmbase-dev libilmbase25 libimagequant0 libimlib2 libinih1 libintl-perl libintl-xs-perl libio-html-perl libio-socket-ssl-perl libip4tc2 libip6tc2 libisc-export1105 libisl23 libisns0 libisoburn1 libisofs6 libitm1 libjansson4 libjbig-dev libjbig0 libjcat1 libjpeg-dev libjpeg-turbo-progs libjpeg-turbo8-dev libjpeg-turbo8 libjpeg8-dev libjpeg8 libjq1 libjs-jquery libjs-sphinxdoc libjs-underscore libjs-xmlextras libjson-c5 libjson-glib-1.0-0 libjson-glib-1.0-common libjson-perl libjson-xs-perl libjte2 libk5crypto3 libkeyutils1 libklibc libkmod2 libkrb5-3 libkrb5support0 libksba8 liblapack-dev liblapack3 liblcms2-2 liblcms2-dev libldap-2.5-0 libldap-common liblldb-14 libllvm13 libllvm14 libllvm15 liblmdb0 liblocale-gettext-perl liblqr-1-0-dev liblqr-1-0 liblsan0 libltdl-dev libltdl7 liblttng-ust-common1 liblttng-ust-ctl5 liblttng-ust1 liblua5.3-0 liblvm2cmd2.03 liblwp-mediatypes-perl liblwp-protocol-https-perl liblz4-1 liblz4-dev liblzma-dev liblzma5 liblzo2-2 libmagic-dev libmagic-mgc libmagic1 libmagickcore-6-arch-config libmagickcore-6-headers libmagickcore-6.q16-6-extra libmagickcore-6.q16-6 libmagickcore-6.q16-dev libmagickcore-dev libmagickwand-6-headers libmagickwand-6.q16-6 libmagickwand-6.q16-dev libmagickwand-dev libmailtools-perl libmaxminddb0 libmbim-glib4 libmbim-proxy libmd0 libmecab2 libmediainfo0v5 libmemcached11 libmm-glib0 libmms0 libmnl0 libmodule-find-perl libmodule-scandeps-perl libmono-2.0-1 libmono-2.0-dev libmono-accessibility4.0-cil libmono-cairo4.0-cil libmono-cecil-private-cil libmono-cil-dev libmono-codecontracts4.0-cil libmono-compilerservices-symbolwriter4.0-cil libmono-corlib4.5-cil libmono-cscompmgd0.0-cil libmono-csharp4.0c-cil libmono-custommarshalers4.0-cil libmono-data-tds4.0-cil libmono-db2-1.0-cil libmono-debugger-soft4.0a-cil libmono-http4.0-cil libmono-i18n-cjk4.0-cil libmono-i18n-mideast4.0-cil libmono-i18n-other4.0-cil libmono-i18n-rare4.0-cil libmono-i18n-west4.0-cil libmono-i18n4.0-all libmono-i18n4.0-cil libmono-ldap4.0-cil libmono-management4.0-cil libmono-messaging-rabbitmq4.0-cil libmono-messaging4.0-cil libmono-microsoft-build-engine4.0-cil libmono-microsoft-build-framework4.0-cil libmono-microsoft-build-tasks-v4.0-4.0-cil libmono-microsoft-build-utilities-v4.0-4.0-cil libmono-microsoft-build4.0-cil libmono-microsoft-csharp4.0-cil libmono-microsoft-visualc10.0-cil libmono-microsoft-web-infrastructure1.0-cil libmono-oracle4.0-cil libmono-parallel4.0-cil libmono-peapi4.0a-cil libmono-posix4.0-cil libmono-profiler libmono-rabbitmq4.0-cil libmono-relaxng4.0-cil libmono-security4.0-cil libmono-sharpzip4.84-cil libmono-simd4.0-cil libmono-smdiagnostics0.0-cil libmono-sqlite4.0-cil libmono-system-componentmodel-composition4.0-cil libmono-system-componentmodel-dataannotations4.0-cil libmono-system-configuration-install4.0-cil libmono-system-configuration4.0-cil libmono-system-core4.0-cil libmono-system-data-datasetextensions4.0-cil libmono-system-data-entity4.0-cil libmono-system-data-linq4.0-cil libmono-system-data-services-client4.0-cil libmono-system-data-services4.0-cil libmono-system-data4.0-cil libmono-system-deployment4.0-cil libmono-system-design4.0-cil libmono-system-drawing-design4.0-cil libmono-system-drawing4.0-cil libmono-system-dynamic4.0-cil libmono-system-enterpriseservices4.0-cil libmono-system-identitymodel-selectors4.0-cil libmono-system-identitymodel4.0-cil libmono-system-io-compression-filesystem4.0-cil libmono-system-io-compression4.0-cil libmono-system-json-microsoft4.0-cil libmono-system-json4.0-cil libmono-system-ldap-protocols4.0-cil libmono-system-ldap4.0-cil libmono-system-management4.0-cil libmono-system-messaging4.0-cil libmono-system-net-http-formatting4.0-cil libmono-system-net-http-webrequest4.0-cil libmono-system-net-http4.0-cil libmono-system-net4.0-cil libmono-system-numerics-vectors4.0-cil libmono-system-numerics4.0-cil libmono-system-reactive-core2.2-cil libmono-system-reactive-debugger2.2-cil libmono-system-reactive-experimental2.2-cil libmono-system-reactive-interfaces2.2-cil libmono-system-reactive-linq2.2-cil libmono-system-reactive-observable-aliases0.0-cil libmono-system-reactive-platformservices2.2-cil libmono-system-reactive-providers2.2-cil libmono-system-reactive-runtime-remoting2.2-cil libmono-system-reactive-windows-forms2.2-cil libmono-system-reactive-windows-threading2.2-cil libmono-system-reflection-context4.0-cil libmono-system-runtime-caching4.0-cil libmono-system-runtime-durableinstancing4.0-cil libmono-system-runtime-serialization-formatters-soap4.0-cil libmono-system-runtime-serialization4.0-cil libmono-system-runtime4.0-cil libmono-system-security4.0-cil libmono-system-servicemodel-activation4.0-cil libmono-system-servicemodel-discovery4.0-cil libmono-system-servicemodel-internals0.0-cil libmono-system-servicemodel-routing4.0-cil libmono-system-servicemodel-web4.0-cil libmono-system-servicemodel4.0a-cil libmono-system-serviceprocess4.0-cil libmono-system-threading-tasks-dataflow4.0-cil libmono-system-transactions4.0-cil libmono-system-web-abstractions4.0-cil libmono-system-web-applicationservices4.0-cil libmono-system-web-dynamicdata4.0-cil libmono-system-web-extensions-design4.0-cil libmono-system-web-extensions4.0-cil libmono-system-web-http-selfhost4.0-cil libmono-system-web-http-webhost4.0-cil libmono-system-web-http4.0-cil libmono-system-web-mobile4.0-cil libmono-system-web-mvc3.0-cil libmono-system-web-razor2.0-cil libmono-system-web-regularexpressions4.0-cil libmono-system-web-routing4.0-cil libmono-system-web-services4.0-cil libmono-system-web-webpages-deployment2.0-cil libmono-system-web-webpages-razor2.0-cil libmono-system-web-webpages2.0-cil libmono-system-web4.0-cil libmono-system-windows-forms-datavisualization4.0a-cil libmono-system-windows-forms4.0-cil libmono-system-windows4.0-cil libmono-system-workflow-activities4.0-cil libmono-system-workflow-componentmodel4.0-cil libmono-system-workflow-runtime4.0-cil libmono-system-xaml4.0-cil libmono-system-xml-linq4.0-cil libmono-system-xml-serialization4.0-cil libmono-system-xml4.0-cil libmono-system4.0-cil libmono-tasklets4.0-cil libmono-webbrowser4.0-cil libmono-webmatrix-data4.0-cil libmono-windowsbase4.0-cil libmono-xbuild-tasks4.0-cil libmonoboehm-2.0-1 libmonosgen-2.0-1 libmonosgen-2.0-dev libmount-dev libmount1 libmpc3 libmpdec3 libmpfr6 libmspack0 libmysqlclient-dev libmysqlclient21 libncurses-dev libncurses6 libncursesw6 libnet-http-perl libnet-smtp-ssl-perl libnet-ssleay-perl libnetfilter-conntrack3 libnetplan0 libnettle8 libnewt0.52 libnfnetlink0 libnftables1 libnftnl11 libnghttp2-14 libnginx-mod-http-geoip2 libnginx-mod-http-image-filter libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream-geoip2 libnginx-mod-stream libnl-3-200 libnl-genl-3-200 libnorm1 libnpth0 libnsl-dev libnsl2 libnspr4 libnss-systemd libnss3 libntfs-3g89 libnuma1 libobjc-11-dev libobjc4 libodbc2 libodbccr2 libodbcinst2 libogg0 libonig5 libopenexr-dev libopenexr25 libopeniscsiusr libopenjp2-7-dev libopenjp2-7 libopus0 libostree-1-1 libp11-kit0 libpackagekit-glib2-18 libpam-cap libpam-modules-bin libpam-modules libpam-runtime libpam-systemd libpam0g libpango-1.0-0 libpangocairo-1.0-0 libpangoft2-1.0-0 libpaper-utils libpaper1 libparted-fs-resize0 libparted2 libpcap0.8 libpci3 libpciaccess0 libpcre16-3 libpcre2-16-0 libpcre2-32-0 libpcre2-8-0 libpcre2-dev libpcre2-posix3 libpcre3-dev libpcre32-3 libpcre3 libpcrecpp0v5 libperl5.34 libpfm4 libpgm-5.3-0 libpipeline1 libpixman-1-0 libpixman-1-dev libplymouth5 libpng-dev libpng16-16 libpolkit-agent-1-0 libpolkit-gobject-1-0 libpopt0 libpq-dev libpq5 libproc-processtable-perl libprocps8 libprotobuf-lite23 libproxy1v5 libpsl5 libpthread-stubs0-dev libpython3-dev libpython3-stdlib libpython3.10-dev libpython3.10-minimal libpython3.10-stdlib libpython3.10 libqdbm14 libqmi-glib5 libqmi-proxy libquadmath0 librabbitmq4 libraqm0 libre2-9 libreadline-dev libreadline8 librpm9 librpmbuild9 librpmio9 librpmsign9 librsvg2-2 librsvg2-common librsvg2-dev librtmp1 libruby3.0 libsasl2-2 libsasl2-modules-db libsasl2-modules libseccomp2 libsecret-1-0 libsecret-1-dev libsecret-common libselinux1-dev libselinux1 libsemanage-common libsemanage2 libsensors-config libsensors5 libsepol-dev libsepol2 libserf-1-1 libsgutils2-2 libsigsegv2 libslang2 libslirp0 libsm-dev libsm6 libsmartcols1 libsmbios-c2 libsnappy1v5 libsndfile1 libsnmp-base libsnmp40 libsodium23 libsort-naturally-perl libsoup2.4-1 libsoup2.4-common libsqlite3-0 libsqlite3-dev libss2 libssh-4 libssh2-1 libssl-dev libssl1.1 libssl3 libstdc++-10-dev libstdc++-11-dev libstdc++-12-dev libstdc++-13-dev libstdc++-9-dev libstdc++6 libstemmer0d libsvn1 libsybdb5 libsystemd0 libtalloc2 libtasn1-6 libtcl8.6 libterm-readkey-perl libtevent0 libtext-charwidth-perl libtext-iconv-perl libtext-unidecode-perl libtext-wrapi18n-perl libthai-data libthai0 libtidy5deb1 libtiff-dev libtiff5 libtiffxx5 libtimedate-perl libtinfo-dev libtinfo6 libtinyxml2-9 libtirpc-common libtirpc-dev libtirpc3 libtk8.6 libtommath1 libtool libtry-tiny-perl libtsan0 libtsan2 libtss2-esys-3.0.2-0 libtss2-mu0 libtss2-rc0 libtss2-sys1 libtss2-tcti-cmd0 libtss2-tcti-device0 libtss2-tcti-mssim0 libtss2-tcti-swtpm0 libtypes-serialiser-perl libu2f-udev libubsan1 libuchardet0 libucl1 libudev1 libudisks2-0 libunistring2 libunwind-14-dev libunwind-14 libunwind8 liburcu8 liburi-perl libusb-1.0-0 libutempter0 libutf8proc2 libuuid1 libuv1 libvolume-key1 libvorbis0a libvorbisenc2 libvulkan1 libwayland-client0 libwayland-cursor0 libwayland-egl1 libwayland-server0 libwbclient0 libwebp7 libwebpdemux2 libwebpmux3 libwmf-0.2-7 libwmf-dev libwmflite-0.2-7 libwrap0 libwww-perl libwww-robotrules-perl libx11-6 libx11-data libx11-dev libx11-xcb1 libx265-199 libxau-dev libxau6 libxaw7 libxcb-dri2-0 libxcb-dri3-0 libxcb-glx0 libxcb-present0 libxcb-randr0 libxcb-render0-dev libxcb-render0 libxcb-shape0 libxcb-shm0-dev libxcb-shm0 libxcb-sync1 libxcb-xfixes0 libxcb1-dev libxcb1 libxcomposite1 libxcursor1 libxcvt0 libxdamage1 libxdmcp-dev libxdmcp6 libxext-dev libxext6 libxfixes3 libxfont2 libxft2 libxi6 libxinerama1 libxkbcommon0 libxkbfile-dev libxkbfile1 libxml-libxml-perl libxml-namespacesupport-perl libxml-sax-base-perl libxml-sax-perl libxml2-dev libxml2 libxmlb2 libxmlsec1-openssl libxmlsec1 libxmu6 libxmuu1 libxpm4 libxrandr2 libxrender-dev libxrender1 libxshmfence1 libxslt1.1 libxss1 libxt-dev libxt6 libxtables12 libxtst6 libxv1 libxxf86dga1 libxxf86vm1 libxxhash0 libyajl2 libyaml-0-2 libyaml-dev libz3-4 libz3-dev libzen0v5 libzip4 libzmq5 libzstd-dev libzstd1 linux-azure-6.5-cloud-tools-6.5.0-1015 linux-azure-6.5-cloud-tools-6.5.0-1016 linux-azure-6.5-headers-6.5.0-1015 linux-azure-6.5-headers-6.5.0-1016 linux-azure-6.5-tools-6.5.0-1015 linux-azure-6.5-tools-6.5.0-1016 linux-azure linux-base-sgx linux-base linux-cloud-tools-6.5.0-1015-azure linux-cloud-tools-6.5.0-1016-azure linux-cloud-tools-azure linux-cloud-tools-common linux-headers-6.5.0-1015-azure linux-headers-6.5.0-1016-azure linux-headers-azure linux-image-6.5.0-1015-azure linux-image-6.5.0-1016-azure linux-image-azure linux-libc-dev linux-modules-6.5.0-1015-azure linux-modules-6.5.0-1016-azure linux-tools-6.5.0-1015-azure linux-tools-6.5.0-1016-azure linux-tools-azure linux-tools-common lld-13 lld-14 lld-15 lldb-14 llvm-13-dev llvm-13-linker-tools llvm-13-runtime llvm-13-tools llvm-13 llvm-14-dev llvm-14-linker-tools llvm-14-runtime llvm-14-tools llvm-14 llvm-15-dev llvm-15-linker-tools llvm-15-runtime llvm-15-tools llvm-15 locales login logrotate logsave lsb-base lsb-release lshw lsof lsscsi lto-disabled-list lvm2 lxd-agent-loader lz4 m4 mailcap make man-db manpages mawk mdadm mecab-ipadic-utf8 mecab-ipadic mecab-utils media-types mediainfo menu mercurial-common mercurial microsoft-edge-stable mime-support miscfiles mlock mokutil mono-4.0-gac mono-4.0-service mono-complete mono-csharp-shell mono-devel mono-gac mono-llvm-support mono-llvm-tools mono-mcs mono-roslyn mono-runtime-common mono-runtime-sgen mono-runtime mono-utils mono-xbuild mono-xsp4-base mono-xsp4 monodoc-base monodoc-http monodoc-manual motd-news-config mount msbuild-libhostfxr msbuild-sdkresolver msbuild msodbcsql17 mssql-tools mtr-tiny multipath-tools mysql-client-8.0 mysql-client-core-8.0 mysql-client mysql-common mysql-server-8.0 mysql-server-core-8.0 mysql-server nano ncurses-base ncurses-bin ncurses-term needrestart net-tools netbase netcat-openbsd netcat netplan.io netstandard-targeting-pack-2.1 networkd-dispatcher nftables nginx-common nginx-core nginx novnc ntfs-3g nuget nvme-cli odbcinst open-iscsi open-vm-tools openssh-client openssh-server openssh-sftp-server openssl os-prober overlayroot p11-kit-modules p11-kit p7zip-full p7zip-rar p7zip packagekit-tools packagekit packages-microsoft-prod parallel parted pass passwd pastebinit patch patchelf pci.ids pciutils perl-base perl-modules-5.34 perl-openssl-defaults perl php-common php-pear php8.1-amqp php8.1-apcu php8.1-bcmath php8.1-bz2 php8.1-cgi php8.1-cli php8.1-common php8.1-curl php8.1-dba php8.1-dev php8.1-enchant php8.1-fpm php8.1-gd php8.1-gmp php8.1-igbinary php8.1-imagick php8.1-imap php8.1-interbase php8.1-intl php8.1-ldap php8.1-mbstring php8.1-memcache php8.1-memcached php8.1-mongodb php8.1-msgpack php8.1-mysql php8.1-odbc php8.1-opcache php8.1-pcov php8.1-pgsql php8.1-phpdbg php8.1-pspell php8.1-readline php8.1-redis php8.1-snmp php8.1-soap php8.1-sqlite3 php8.1-sybase php8.1-tidy php8.1-xdebug php8.1-xml php8.1-xsl php8.1-yaml php8.1-zip php8.1-zmq php8.1 pigz pinentry-curses pkexec pkg-config plymouth-theme-ubuntu-text plymouth podman policykit-1 polkitd pollinate postgresql-14 postgresql-client-14 postgresql-client-common postgresql-common powermgmt-base powershell procps psmisc publicsuffix python-apt-common python-babel-localedata python-is-python3 python3-apport python3-apt python3-attr python3-automat python3-babel python3-bcrypt python3-blinker python3-certifi python3-cffi-backend python3-chardet python3-click python3-colorama python3-commandnotfound python3-configobj python3-constantly python3-cryptography python3-dateutil python3-dbus python3-debconf python3-debian python3-debtcollector python3-deprecated python3-dev python3-distro-info python3-distro python3-distupgrade python3-distutils python3-docutils python3-gdbm python3-gi python3-hamcrest python3-httplib2 python3-hyperlink python3-idna python3-importlib-metadata python3-incremental python3-iso8601 python3-jeepney python3-jinja2 python3-json-pointer python3-jsonpatch python3-jsonschema python3-jwcrypto python3-jwt python3-keyring python3-launchpadlib python3-lazr.restfulclient python3-lazr.uri python3-lib2to3 python3-lldb-14 python3-magic python3-markupsafe python3-minimal python3-monotonic python3-more-itertools python3-msgpack python3-netaddr python3-netifaces python3-newt python3-novnc python3-numpy python3-oauthlib python3-olefile python3-openssl python3-oslo.config python3-oslo.context python3-oslo.i18n python3-oslo.log python3-oslo.serialization python3-oslo.utils python3-packaging python3-parted python3-pbr python3-pexpect python3-pil python3-pip-whl python3-pip python3-pkg-resources python3-problem-report python3-ptyprocess python3-pyasn1-modules python3-pyasn1 python3-pygments python3-pyinotify python3-pyparsing python3-pyrsistent python3-requests python3-rfc3986 python3-roman python3-secretstorage python3-serial python3-service-identity python3-setuptools-whl python3-setuptools python3-six python3-software-properties python3-stevedore python3-systemd python3-twisted python3-tz python3-update-manager python3-urllib3 python3-venv python3-wadllib python3-websockify python3-wheel python3-wrapt python3-yaml python3-zipp python3-zope.interface python3.10-dev python3.10-minimal python3.10-venv python3.10 python3 r-base-core r-base-dev r-base-html r-base r-cran-boot r-cran-class r-cran-cluster r-cran-codetools r-cran-foreign r-cran-kernsmooth r-cran-lattice r-cran-mass r-cran-matrix r-cran-mgcv r-cran-nlme r-cran-nnet r-cran-rpart r-cran-spatial r-cran-survival r-doc-html r-recommended rake readline-common referenceassemblies-pcl ri rpcsvc-proto rpm-common rpm2cpio rpm rsync rsyslog ruby-dev ruby-full ruby-net-telnet ruby-rubygems ruby-webrick ruby-xmlrpc ruby3.0-dev ruby3.0-doc ruby3.0 ruby rubygems-integration run-one sbsigntool screen secureboot-db sed sensible-utils session-manager-plugin session-migration sg3-utils-udev sg3-utils sgml-base shared-mime-info shellcheck shim-signed shtool skopeo slirp4netns snapd snmp software-properties-common sosreport sphinxsearch sqlite3 squashfs-tools ssh-import-id ssh sshpass ssl-cert strace subversion sudo swig4.0 swig sysstat systemd-hwe-hwdb systemd-sysv systemd sysvinit-utils tar tcl8.6 tcl tcpdump telnet temurin-11-jdk temurin-17-jdk temurin-21-jdk temurin-8-jdk tex-common texinfo thin-provisioning-tools tigervnc-common tigervnc-standalone-server tigervnc-tools tigervnc-xorg-extension time tk8.6 tk tmux tnftp tpm-udev tree tzdata ubuntu-advantage-tools ubuntu-keyring ubuntu-minimal ubuntu-mono ubuntu-pro-client-l10n ubuntu-pro-client ubuntu-release-upgrader-core ubuntu-server ubuntu-standard ucf udev ufw uidmap unixodbc-common unixodbc-dev unixodbc unzip update-manager-core update-notifier-common upx-ucl usb-modeswitch-data usb-modeswitch usb.ids usbutils usrmerge util-linux uuid-dev uuid-runtime vim-common vim-runtime vim-tiny vim walinuxagent websockify wget whiptail x11-common x11-utils x11-xkb-utils x11-xserver-utils x11proto-dev xauth xbitmaps xcvt xdg-user-dirs xdg-utils xfonts-base xfonts-encodings xfonts-utils xfsprogs xkb-data xml-core xorg-sgml-doctools xorriso xscreensaver-data xscreensaver xserver-common xserver-xorg-core xserver-xorg-video-dummy xterm xtrans-dev xvfb xxd xz-utils zerofree zip zlib1g-dev zlib1g zstd zsync
          version: 1.0
      - name: Setup host access
        run: |
          sudo apt -yq update
          sudo apt -yq upgrade
          sudo apt -yq install tmux openssh-client novnc tigervnc-standalone-server tigervnc-xorg-extension tzdata xserver-xorg-video-dummy icewm icewm-common
          sudo apt -yq install --reinstall systemd-sysv
          for a in autoremove purge clean; do sudo apt -yqq $a; done
          ssh-keygen -t ed25519 -q -f "$HOME/.ssh/id_ed25519" -N ""
          sudo chmod 600 "$HOME/.ssh/id_ed25519"
          curl -sL -o /usr/local/bin/ttyd $(curl -s 'https://api.github.com/repos/tsl0922/ttyd/releases/latest' | jq -r '.assets[] | select(.name|contains("x86_64")).browser_download_url') && sudo chmod a+x /usr/local/bin/ttyd
          /usr/local/bin/ttyd -p 7681 -W -t titleFixed="ttyd - Android emulator" -t fontSize=13 -t fontFamily=monospace -m 1 /bin/bash -lc '/usr/bin/tmux a || /usr/bin/tmux' &
          /usr/bin/vncserver -geometry 1920x960 -localhost yes -alwaysshared -SecurityTypes none :1
          /usr/bin/websockify -D --web=/usr/share/novnc/ 6080 localhost:5901
          /usr/bin/ssh -o StrictHostKeyChecking=no -o BatchMode=yes -o ServerAliveInterval=5 -T srv.us -R 1:127.0.0.1:7681 -R 2:127.0.0.1:5901 -R 3:127.0.0.1:6080 &
      - name: run tests
        uses: reactivecircus/android-emulator-runner@v2
        with:
          api-level: 29
          emulator-options: -gpu swiftshader_indirect -no-snapshot -noaudio -no-boot-anim
          script: while true; do sleep 300; done
      - name: Wait for stop signals
        run: |
          for a in {1..700}; do [ -f /tmp/poweroff ] && exit || sleep 30; done
