name: "Launch Ubuntu"
on:
  workflow_dispatch:
    inputs:
      desktop-env:
        type: choice
        description: Select desktop environment
        options:
        - xubuntu-core
        - kde-plasma-desktop
        - cinnamon
        - ubuntu-mate-core
        - lubuntu-desktop
        - ubuntu-desktop-minimal
env:
  DEBIAN_FRONTEND: noninteractive
  TZ: Asia/Jakarta
  NTFY: ${{ secrets.NTFY }}
  SSH_J_USERNAME: ${{ secrets.SSH_J_USERNAME }}
  SSH_J_HOSTNAME: ${{ secrets.SSH_J_HOSTNAME }}
  GH_REPO_TOKEN: ${{ secrets.github_token }}
jobs:
  launch_instance:
    runs-on: ubuntu-latest
    steps:
      - name: Restore apt packages from Action cache
        uses: awalsh128/cache-apt-pkgs-action@latest
        with:
          packages: accountsservice accountsservice-ubuntu-schemas alsa-utils anacron apg aptdaemon aptdaemon-data aspnetcore-runtime-6.0 aspnetcore-runtime-7.0 aspnetcore-targeting-pack-6.0 aspnetcore-targeting-pack-7.0 at-spi2-core avahi-daemon avahi-utils bamfdaemon bash blueman bluez bluez-obexd bubblewrap catdoc cgroup-tools cheese-common cinnamon cinnamon-common cinnamon-control-center cinnamon-control-center-data cinnamon-control-center-goa cinnamon-core cinnamon-desktop-data cinnamon-l10n cinnamon-screensaver cinnamon-session cinnamon-session-common cinnamon-settings-daemon cjs colord colord-data cracklib-runtime cups cups-browsed cups-client cups-common cups-core-drivers cups-daemon cups-filters cups-filters-core-drivers cups-ipp-utils cups-pk-helper cups-ppdc cups-server-common dbus-x11 dconf-cli desktop-base desktop-file-utils docbook-xml docutils-common dotnet-apphost-pack-6.0 dotnet-apphost-pack-7.0 dotnet-hostfxr-6.0 dotnet-runtime-6.0 dotnet-runtime-7.0 dotnet-targeting-pack-6.0 dotnet-targeting-pack-7.0 dvisvgm evolution-data-server evolution-data-server-common exif exo-utils ffmpeg file-roller fonts-droid-fallback fonts-lmodern fonts-noto-mono fonts-quicksand fonts-ubuntu fonts-urw-base35 gcr gedit gedit-common geoclue-2.0 gettext ghostscript gir1.2-accountsservice-1.0 gir1.2-atk-1.0 gir1.2-ayatanaappindicator3-0.1 gir1.2-camel-1.2 gir1.2-caribou-1.0 gir1.2-cinnamondesktop-3.0 gir1.2-clutter-1.0 gir1.2-cmenu-3.0 gir1.2-cogl-1.0 gir1.2-coglpango-1.0 gir1.2-cvc-1.0 gir1.2-dbusmenu-glib-0.4 gir1.2-ecal-2.0 gir1.2-edataserver-1.2 gir1.2-gdata-0.0 gir1.2-gdesktopenums-3.0 gir1.2-gkbd-3.0 gir1.2-gnomedesktop-3.0 gir1.2-goa-1.0 gir1.2-gtk-3.0 gir1.2-gtkclutter-1.0 gir1.2-gtksource-4 gir1.2-handy-1 gir1.2-harfbuzz-0.0 gir1.2-ibus-1.0 gir1.2-ical-3.0 gir1.2-json-1.0 gir1.2-keybinder-3.0 gir1.2-meta-muffin-0.0 gir1.2-nemo-3.0 gir1.2-nm-1.0 gir1.2-nma-1.0 gir1.2-notify-0.7 gir1.2-pango-1.0 gir1.2-peas-1.0 gir1.2-polkit-1.0 gir1.2-soup-2.4 gir1.2-timezonemap-1.0 gir1.2-upowerglib-1.0 gir1.2-vte-2.91 gir1.2-xapp-1.0 gir1.2-xkl-1.0 gist gkbd-capplet gnome-accessibility-themes gnome-backgrounds gnome-bluetooth gnome-bluetooth-common gnome-control-center gnome-control-center-data gnome-control-center-faces gnome-desktop3-data gnome-disk-utility gnome-keyring gnome-keyring-pkcs11 gnome-online-accounts gnome-power-manager gnome-remote-desktop gnome-screensaver gnome-settings-daemon gnome-settings-daemon-common gnome-terminal gnome-terminal-data gnome-themes-extra-data gnome-themes-extra gnome-user-docs gsettings-ubuntu-schemas gstreamer1.0-clutter-3.0 gstreamer1.0-gl gstreamer1.0-plugins-base gstreamer1.0-plugins-good gstreamer1.0-x gtk2-engines-pixbuf gvfs-backends gvfs-common gvfs-daemons gvfs-fuse gvfs-libs gvfs i965-va-driver ibus ibus-data ibus-gtk3 ibus-gtk4 ibus-gtk id3 ieee-data iio-sensor-proxy im-config indicator-applet indicator-application indicator-appmenu indicator-bluetooth indicator-common indicator-datetime indicator-keyboard indicator-messages indicator-power indicator-printers indicator-session indicator-sound inotify-tools intel-media-va-driver inxi ipp-usb iso-flags-png-320x240 jayatana language-selector-common language-selector-gnome lib32gcc-s1 lib32stdc++6 libaa1 libaacs0 libabsl20210324 libaccounts-glib0 libaccountsservice0 libasound2-plugins libass9 libasyncns0 libatopology2 libavahi-core7 libavc1394-0 libavcodec58 libavdevice58 libavfilter7 libavformat58 libavutil56 libayatana-appindicator3-1 libayatana-ido3-0.4-0 libayatana-indicator3-7 libbamf3-2 libbdplus0 libbluetooth3 libbluray2 libbs2b0 libcaca0 libcamel-1.2-63 libcanberra-gtk3-0 libcanberra-gtk3-module libcanberra-pulse libcaribou-common libcaribou0 libcdio-cdda2 libcdio-paranoia2 libcdio19 libcdparanoia0 libcgroup1 libcheese-gtk25 libcheese8 libchromaprint-tools libchromaprint1 libcinnamon-control-center1 libcinnamon-desktop4 libcinnamon-menu-3-0 libcjs0 libclutter-1.0-0 libclutter-1.0-common libclutter-gst-3.0-0 libclutter-gtk-1.0-0 libcodec2-1.0 libcogl-common libcogl-pango20 libcogl-path20 libcogl20 libcolord-gtk1 libcolorhug2 libcrack2 libcscreensaver0 libcupsfilters1 libcvc0 libdaemon0 libdc1394-25 libdecor-0-0 libdecor-0-plugin-1-cairo libdouble-conversion3 libdv4 libdvdread8 libebackend-1.2-10 libebml5 libebook-1.2-20 libebook-contacts-1.2-3 libecal-2.0-1 libedata-book-1.2-26 libedata-cal-2.0-1 libedataserver-1.2-26 libedataserverui-1.2-3 libegl-mesa0 libegl1 libevdev2 libexempi8 libexo-2-0 libexo-common libfcitx-config4 libfcitx-gclient1 libfcitx-utils0 libfftw3-single3 libfile-readbackwards-perl libflac8 libflite1 libfmt8 libfontembed1 libfreerdp-client2-2 libfreerdp-server2-2 libfreerdp2-2 libgail-3-0 libgail-common libgail18 libgck-1-0 libgcr-base-3-1 libgcr-ui-3-1 libgdata-common libgdata22 libgee-0.8-2 libgeoclue-2-0 libgeocode-glib0 libgles2 libgme0 libgnome-bluetooth13 libgnome-desktop-3-19 libgnome-panel0 libgnomekbd-common libgnomekbd8 libgoa-1.0-0b libgoa-1.0-common libgoa-backend-1.0-1 libgphoto2-6 libgphoto2-l10n libgphoto2-port12 libgraphene-1.0-0 libgs9-common libgs9 libgsf-1-114 libgsf-1-common libgsm1 libgsound0 libgspell-1-2 libgspell-1-common libgssdp-1.2-0 libgstreamer-gl1.0-0 libgstreamer-plugins-base1.0-0 libgstreamer-plugins-good1.0-0 libgtk-4-1 libgtk-4-bin libgtk-4-common libgtk2.0-0 libgtk2.0-bin libgtk2.0-common libgtksourceview-4-0 libgtksourceview-4-common libgtop-2.0-11 libgtop2-common libgupnp-1.2-1 libgupnp-av-1.0-3 libgupnp-dlna-2.0-4 libgweather-3-16 libgweather-common libhandy-1-0 libharfbuzz-icu0 libhyphen0 libibus-1.0-5 libical3 libidn12 libido3-0.1-0 libiec61883-0 libieee1284-3 libigdgmm12 libijs-0.35 libimagequant0 libimobiledevice6 libindicator3-7 libinotifytools0 libinput-bin libinput10 libjack-jackd2-0 libjavascriptcoregtk-4.0-18 libjbig2dec0 libkeybinder-3.0-0 libkpathsea6 libldb2 liblightdm-gobject-1-0 liblilv-0-0 liblouis-data liblouis20 liblouisutdml-bin liblouisutdml-data liblouisutdml9 liblttng-ust-common1 liblttng-ust-ctl5 liblttng-ust1 libmanette-0.2-0 libmatroska7 libmediaart-2.0-0 libmessaging-menu0 libmfx1 libmozjs-78-0 libmp3lame0 libmpg123-0 libmtdev1 libmtp-common libmtp-runtime libmtp9 libmuffin0 libmutter-10-0 libmysofa1 libnautilus-extension1a libndp0 libnemo-extension1 libnfs13 libnl-route-3-200 libnm0 libnma-common libnma0 libnotify4 libnss-mdns libobjc4 libopenal-data libopenal1 libopenmpt0 libopus0 liborc-0.4-0 libpam-gnome-keyring libpangoxft-1.0-0 libpcsclite1 libpeas-1.0-0 libpeas-common libphonenumber8 libpipewire-0.3-0 libpipewire-0.3-common libpipewire-0.3-modules libplist3 libpocketsphinx3 libpoppler-cpp0v5 libpoppler-glib8 libpoppler118 libpostproc55 libprotobuf23 libptexenc1 libpugixml1v5 libpulse-mainloop-glib0 libpulse0 libpulsedsp libpwquality-common libpwquality1 libqpdf28 libqt5core5a libqt5dbus5 libqt5network5 libqt5sql5-sqlite libqt5sql5 libqt5xml5 libraqm0 libraw1394-11 librest-0.7-0 librubberband2 librygel-core-2.6-2 librygel-db-2.6-2 librygel-renderer-2.6-2 librygel-server-2.6-2 libsamplerate0 libsane-common libsane1 libsbc1 libsdl2-2.0-0 libserd-0-0 libshine3 libshout3 libsmbclient libsnapd-glib1 libsndfile1 libsndio7.0 libsord-0-0 libsoup-gnome2.4-1 libsoxr0 libspa-0.2-modules libspeex1 libspeexdsp1 libsphinxbase3 libsratom-0-0 libsrt1.4-gnutls libssh-gcrypt-4 libstartup-notification0 libswresample3 libswscale5 libsynctex2 libtag1v5-vanilla libtag1v5 libteamdctl0 libteckit0 libtexlua53 libtexluajit2 libtheora0 libtimezonemap-data libtimezonemap1 libtorrent-rasterbar2.0 libtwolame0 libudfread0 libunity-gtk2-parser0 libunity-gtk3-parser0 libunity-settings-daemon1 libupower-glib3 libusbmuxd6 libv4l-0 libv4lconvert0 libva-drm2 libva-x11-2 libva2 libvdpau1 libvidstab1.1 libvisual-0.4-0 libvncserver1 libvorbisenc2 libvpx7 libvte-2.91-0 libvte-2.91-common libwacom-bin libwacom-common libwacom9 libwavpack1 libwebkit2gtk-4.0-37 libwebrtc-audio-processing1 libwhoopsie-preferences0 libwhoopsie0 libwinpr2-2 libwnck-3-0 libwnck-3-common libwoff1 libwpe-1.0-1 libwpebackend-fdo-1.0-1 libx264-163 libxapp1 libxatracker2 libxcb-res0 libxcb-shape0 libxcb-util1 libxcb-xkb1 libxcvt0 libxfce4ui-2-0 libxfce4ui-common libxfce4util-bin libxfce4util-common libxfce4util7 libxfconf-0-3 libxkbcommon-x11-0 libxkbregistry0 libxklavier16 libxres1 libxv1 libxvidcore4 libxvmc1 libxxf86dga1 libyelp0 libzimg2 libzvbi-common libzvbi0 libzzip-0-13 lightdm linux-cloud-tools-common linux-libc-dev linux-tools-common lm-sensors lmodern mesa-utils mesa-utils-bin mesa-va-drivers mesa-vdpau-drivers mesa-vulkan-drivers metacity-common mobile-broadband-provider-info modemmanager muffin muffin-common mutter-common nautilus-data nautilus-extension-gnome-terminal ncdu nemo nemo-data nemo-fileroller netstandard-targeting-pack-2.1 network-manager network-manager-gnome network-manager-pptp novnc ocl-icd-libopencl1 odt2txt pinentry-gnome3 pipewire-bin pipewire-media-session pipewire plymouth-label pocketsphinx-en-us podman policykit-1-gnome poppler-data poppler-utils postgresql-client power-profiles-daemon ppp pptp-linux pulseaudio pulseaudio-module-bluetooth pulseaudio-utils python-tinycss2-common python3-aptdaemon python3-aptdaemon.gtk3widgets python3-cairo python3-cups python3-cupshelpers python3-dateutil python3-debtcollector python3-defer python3-deprecated python3-docutils python3-gi-cairo python3-ibus-1.0 python3-iso8601 python3-jwcrypto python3-ldb python3-macaroonbakery python3-monotonic python3-msgpack python3-nacl python3-netaddr python3-novnc python3-numpy python3-olefile python3-oslo.config python3-oslo.context python3-oslo.i18n python3-oslo.log python3-oslo.serialization python3-oslo.utils python3-packaging python3-pampy python3-pbr python3-pil python3-protobuf python3-psutil python3-pyinotify python3-pymacaroons python3-rfc3339 python3-rfc3986 python3-roman python3-setproctitle python3-stevedore python3-talloc python3-tinycss python3-tinycss2 python3-webencodings python3-websockify python3-wrapt python3-xapp python3-xdg python3-xlib python3-xlrd qbittorrent-nox qttranslations5-l10n rename rtkit rygel samba-libs sane-airscan sane-utils sgml-base sgml-data system-config-printer system-config-printer-common system-config-printer-udev t1utils texlive-base texlive-binaries tigervnc-common tigervnc-standalone-server tigervnc-tools tigervnc-xorg-extension ubuntu-docs ubuntu-touch-sounds udisks2 unity-greeter unity-gtk-module-common unity-gtk2-module unity-gtk3-module unity-settings-daemon unity-settings-daemon-schemas update-inetd upower usbmuxd va-driver-all vdpau-driver-all vim vim-common vim-runtime vim-tiny wamerican websockify whoopsie whoopsie-preferences wireless-regdb wpasupplicant x11-utils x11-xserver-utils xapp xapps-common xcvt xdg-dbus-proxy xdg-desktop-portal xdg-desktop-portal-gtk xfce4-terminal xfconf xfonts-base xfonts-encodings xfonts-utils xml-core xserver-xorg xserver-xorg-core xserver-xorg-input-all xserver-xorg-input-libinput xserver-xorg-input-wacom xserver-xorg-legacy xserver-xorg-video-all xserver-xorg-video-amdgpu xserver-xorg-video-ati xserver-xorg-video-dummy xserver-xorg-video-fbdev xserver-xorg-video-intel xserver-xorg-video-nouveau xserver-xorg-video-qxl xserver-xorg-video-radeon xserver-xorg-video-vesa xserver-xorg-video-vmware xxd yelp yelp-xsl zenity zenity-common appmenu-gtk-module-common appmenu-gtk3-module appstream apt-config-icons apt-config-icons-hidpi apt-config-icons-large apt-config-icons-large-hidpi baloo-kf5 bluedevil breeze breeze-cursor-theme breeze-gtk-theme breeze-icon-theme bup bup-doc debconf-kde-data debconf-kde-helper docbook-xsl dolphin drkonqi ffmpegthumbs firefox fonts-hack fonts-noto-cjk fonts-noto-core fonts-noto-hinted fonts-noto-ui-core fonts-noto-unhinted frameworkintegration fwupd gamin gdb kaccounts-providers kactivities-bin kactivitymanagerd kde-baseapps kde-cli-tools kde-cli-tools-data kde-config-gtk-style kde-config-screenlocker kde-config-sddm kde-config-updates kde-plasma-desktop kde-style-breeze kde-style-oxygen-qt5 kdeconnect kded5 kdegraphics-thumbnailers kdialog kdoctools5 keditbookmarks kfind kgamma5 khelpcenter khotkeys-data khotkeys kimageformat-plugins kinfocenter kinit kio kio-extras kio-extras-data kmenuedit konsole konsole-kpart kpackagelauncherqml kpackagetool5 kpeople-vcard kscreen ksshaskpass ksystemstats ktexteditor-data ktexteditor-katepart kup-backup kuserfeedback-doc kwalletmanager kwayland-data kwayland-integration kwin-common kwin-data kwin-style-breeze kwin-x11 kwrite kwrited layer-shell-qt liba52-0.7.4 libaccounts-qt5-1 libappimage0 libappmenu-gtk3-parser0 libappstreamqt2 libaribb24-0 libavif13 libbabeltrace1 libboost-regex1.74.0 libc6-dbg libcddb2 libcolorcorrect5 libdbusmenu-qt5-2 libdca0 libdebconf-kde1 libdebuginfod-common libdebuginfod1 libdmtx0b libdolphinvcs5 libdvbpsi10 libdvdnav4 libeditorconfig0 libepub0 libevent-2.1-7 libexiv2-27 libfaad2 libfakekey0 libfuse2 libgamin0 libgav1-0 libgit2-1.1 libgpgmepp6 libgps28 libgrantlee-templates5 libgsettings-qt1 libhfstospell11 libhttp-parser2.9 libipt2 libixml10 libkaccounts2 libkate1 libkdecorations2-5v5 libkdecorations2private9 libkdsoap1 libkf5activities5 libkf5activitiesstats1 libkf5archive5 libkf5attica5 libkf5auth-data libkf5auth5 libkf5authcore5 libkf5baloo5 libkf5balooengine5 libkf5baloowidgets-bin libkf5baloowidgets-data libkf5baloowidgets5 libkf5bluezqt-data libkf5bluezqt6 libkf5bookmarks-data libkf5bookmarks5 libkf5calendarevents5 libkf5codecs-data libkf5codecs5 libkf5completion-data libkf5completion5 libkf5config-bin libkf5config-data libkf5configcore5 libkf5configgui5 libkf5configwidgets-data libkf5configwidgets5 libkf5contacts-data libkf5contacts5 libkf5coreaddons-data libkf5coreaddons5 libkf5crash5 libkf5dbusaddons-bin libkf5dbusaddons-data libkf5dbusaddons5 libkf5declarative-data libkf5declarative5 libkf5dnssd-data libkf5dnssd5 libkf5doctools5 libkf5filemetadata-bin libkf5filemetadata-data libkf5filemetadata3 libkf5globalaccel-bin libkf5globalaccel-data libkf5globalaccel5 libkf5globalaccelprivate5 libkf5guiaddons-bin libkf5guiaddons-data libkf5guiaddons5 libkf5holidays-data libkf5holidays5 libkf5i18n-data libkf5i18n5 libkf5i18nlocaledata5 libkf5iconthemes-bin libkf5iconthemes-data libkf5iconthemes5 libkf5idletime5 libkf5itemmodels5 libkf5itemviews-data libkf5itemviews5 libkf5jobwidgets-data libkf5jobwidgets5 libkf5js5 libkf5kcmutils-data libkf5kcmutils5 libkf5kdcraw5 libkf5kdelibs4support-data libkf5kdelibs4support5-bin libkf5kdelibs4support5 libkf5kexiv2-15.0.0 libkf5khtml-bin libkf5khtml-data libkf5khtml5 libkf5kiocore5 libkf5kiofilewidgets5 libkf5kiogui5 libkf5kiontlm5 libkf5kiowidgets5 libkf5kirigami2-5 libkf5networkmanagerqt6 libkf5newstuff-data libkf5newstuff5 libkf5newstuffcore5 libkf5notifications-data libkf5notifications5 libkf5notifyconfig-data libkf5notifyconfig5 libkf5package-data libkf5package5 libkf5parts-data libkf5parts-plugins libkf5parts5 libkf5people-data libkf5people5 libkf5peoplebackend5 libkf5peoplewidgets5 libkf5plasma5 libkf5plasmaquick5 libkf5prison5 libkf5pty-data libkf5pty5 libkf5pulseaudioqt3 libkf5purpose-bin libkf5purpose5 libkf5quickaddons5 libkf5runner5 libkf5screen-bin libkf5screen7 libkf5service-bin libkf5service-data libkf5service5 libkf5solid5-data libkf5solid5 libkf5sonnet5-data libkf5sonnetcore5 libkf5sonnetui5 libkf5style5 libkf5su-bin libkf5su-data libkf5su5 libkf5syndication5abi1 libkf5syntaxhighlighting-data libkf5syntaxhighlighting5 libkf5sysguard-data libkf5texteditor-bin libkf5texteditor5 libkf5textwidgets-data libkf5textwidgets5 libkf5threadweaver5 libkf5wallet-bin libkf5wallet-data libkf5wallet5 libkf5waylandclient5 libkf5waylandserver5 libkf5widgetsaddons-data libkf5widgetsaddons5 libkf5windowsystem-data libkf5windowsystem5 libkf5xmlgui-bin libkf5xmlgui-data libkf5xmlgui5 libkfontinst5 libkfontinstui5 libkpmcore11 libkscreenlocker5 libksgrd9 libksysguardformatter1 libksysguardsensorfaces1 libksysguardsensors1 libksysguardsystemstats1 libkuserfeedbackcore1 libkuserfeedbackwidgets1 libkwalletbackend5-5 libkwaylandserver5 libkwineffects13 libkwinglutils13 libkwinxrenderutils13 libkworkspace5-5 liblayershellqtinterface5 liblirc-client0 liblua5.2-0 libmad0 libmarkdown2 libmbedcrypto7 libmbedtls14 libmbedx509-1 libmd4c0 libminizip1 libmpcdec6 libmpeg2-4 libnotificationmanager1 libopengl0 libopenmpt-modplug1 liboxygenstyle5-5 liboxygenstyleconfig5-5 libpackagekitqt5-1 libpam-kwallet-common libpam-kwallet5 libphonon4qt5-4 libphonon4qt5-data libplacebo192 libplasma-geolocation-interface5 libpolkit-qt5-1-1 libpoppler-qt5-1 libpowerdevilcore2 libpowerdevilui5 libprocesscore9 libprocessui9 libproxy-tools libqaccessibilityclient-qt5-0 libqalculate-data libqalculate22 libqca-qt5-2-plugins libqca-qt5-2 libqmobipocket2 libqrencode4 libqt5concurrent5 libqt5designer5 libqt5gui5 libqt5help5 libqt5hunspellinputmethod5 libqt5multimedia5-plugins libqt5multimedia5 libqt5multimediagsttools5 libqt5multimediaquick5 libqt5multimediawidgets5 libqt5positioning5 libqt5printsupport5 libqt5qml5 libqt5qmlmodels5 libqt5qmlworkerscript5 libqt5quick5 libqt5quickcontrols2-5 libqt5quickparticles5 libqt5quickshapes5 libqt5quicktemplates2-5 libqt5quickwidgets5 libqt5sensors5 libqt5svg5 libqt5test5 libqt5texttospeech5 libqt5virtualkeyboard5 libqt5waylandclient5 libqt5waylandcompositor5 libqt5webchannel5 libqt5webengine-data libqt5webengine5 libqt5webenginecore5 libqt5webenginewidgets5 libqt5widgets5 libqt5x11extras5 libraw20 libresid-builder0c2a libscim8v5 libsdl-image1.2 libsdl1.2debian libsidplay2 libsignon-plugins-common1 libsignon-qt5-1 libsnapd-qt1 libsource-highlight-common libsource-highlight4v5 libspatialaudio0 libspeechd2 libsquashfuse0 libtaskmanager6 libupnp13 libva-wayland2 libvlc-bin libvlc5 libvlccore9 libvoikko1 libweather-ion7 libxapian30 libxcb-composite0 libxcb-cursor0 libxcb-damage0 libxcb-dpms0 libxcb-icccm4 libxcb-image0 libxcb-keysyms1 libxcb-record0 libxcb-render-util0 libxcb-xinerama0 libxcb-xinput0 libxcb-xv0 libxml2-utils libyuv0 libzxingcore1 media-player-info milou mkvtoolnix oxygen-sounds par2 partitionmanager phonon4qt5-backend-vlc phonon4qt5 plasma-browser-integration plasma-desktop plasma-desktop-data plasma-discover plasma-discover-backend-fwupd plasma-discover-backend-snap plasma-discover-common plasma-disks plasma-framework plasma-integration plasma-pa plasma-systemmonitor plasma-thunderbolt plasma-workspace plasma-workspace-data polkit-kde-agent-1 powerdevil powerdevil-data pulseaudio-module-gsettings python3-fuse python3-pylibacl python3-pyqt5 python3-pyqt5.sip python3-pyxattr python3-tornado qdbus-qt5 qml-module-gsettings1.0 qml-module-org-kde-activities qml-module-org-kde-bluezqt qml-module-org-kde-draganddrop qml-module-org-kde-kcm qml-module-org-kde-kconfig qml-module-org-kde-kcoreaddons qml-module-org-kde-kholidays qml-module-org-kde-kio qml-module-org-kde-kirigami2 qml-module-org-kde-kitemmodels qml-module-org-kde-kquickcontrols qml-module-org-kde-kquickcontrolsaddons qml-module-org-kde-ksysguard qml-module-org-kde-kwindowsystem qml-module-org-kde-newstuff qml-module-org-kde-people qml-module-org-kde-prison qml-module-org-kde-purpose qml-module-org-kde-qqc2desktopstyle qml-module-org-kde-quickcharts qml-module-org-kde-runnermodel qml-module-org-kde-solid qml-module-org-kde-sonnet qml-module-org-kde-userfeedback qml-module-qt-labs-folderlistmodel qml-module-qt-labs-platform qml-module-qt-labs-qmlmodels qml-module-qt-labs-settings qml-module-qtgraphicaleffects qml-module-qtmultimedia qml-module-qtqml-models2 qml-module-qtqml qml-module-qtquick-controls2 qml-module-qtquick-controls qml-module-qtquick-dialogs qml-module-qtquick-layouts qml-module-qtquick-particles2 qml-module-qtquick-privatewidgets qml-module-qtquick-shapes qml-module-qtquick-templates2 qml-module-qtquick-virtualkeyboard qml-module-qtquick-window2 qml-module-qtquick2 qml-module-qtwebengine qml-module-ubuntu-onlineaccounts qt5-gtk-platformtheme qtchooser qtspeech5-speechd-plugin qtvirtualkeyboard-plugin qtwayland5 sddm sddm-theme-debian-maui signon-plugin-oauth2 smartmontools socat software-properties-qt sonnet-plugins sshfs systemsettings vlc-data vlc-plugin-base vlc-plugin-video-output vulkan-tools xdg-desktop-portal-kde xsettingsd alsa-base arc-theme ffmpegthumbnailer fonts-freefont-ttf foomatic-db-compressed-ppds genisoimage ghostscript-x gir1.2-udisks-2.0 gtk2-engines-murrine inputattach libffmpegthumbnailer4v5 libfile-basedir-perl libfile-desktopentry-perl libfile-listing-perl libfile-mimeinfo-perl libfm-data libfm-extra4 libfm-gtk-data libfm-gtk4 libfm-modules libfm-qt9 libfm4 libgdk-pixbuf-xlib-2.0-0 libgle3 libglu1-mesa libgutenprint-common libgutenprint9 libhtml-tree-perl libhttp-cookies-perl libhttp-negotiate-perl libid3tag0 libimlib2 libio-socket-ssl-perl libipc-system-simple-perl libiw30 libjpeg-turbo-progs liblwp-protocol-https-perl liblxqt-globalkeys-ui0 liblxqt-globalkeys0 liblxqt0 libmenu-cache-bin libmenu-cache3 libmuparser2v5 libnet-http-perl libnet-ssleay-perl libnetpbm10 libobrender32v5 libobt2v5 libqt5xdg3 libqt5xdgiconloader3 libqtermwidget5-0 libstatgrab10 libsysstat-qt5-0 libtry-tiny-perl libuniconf4.6 libwvstreams4.6-base libwvstreams4.6-extras libwww-perl libwww-robotrules-perl linux-sound-base lubuntu-artwork lubuntu-default-settings lubuntu-desktop lubuntu-grub-theme lubuntu-update-notifier lxmenu-data lxqt-about lxqt-admin lxqt-config lxqt-core lxqt-globalkeys lxqt-notificationd lxqt-openssh-askpass lxqt-panel lxqt-policykit lxqt-powermanagement lxqt-qtplugin lxqt-runner lxqt-session lxqt-sudo lxqt-system-theme lxqt-themes netpbm nm-tray obconf-qt openbox openprinting-ppds oxygen-icon-theme papirus-icon-theme pavucontrol-qt pcmanfm-qt perl-openssl-defaults pinentry-qt plymouth-theme-lubuntu-logo plymouth-theme-lubuntu-text plymouth-theme-spinner policykit-desktop-privileges printer-driver-gutenprint printer-driver-pnm2ppa python3-dbus.mainloop.pyqt5 python3-xkit qterminal qtermwidget5-data rfkill sddm-theme-lubuntu spice-vdagent ubuntu-drivers-common ubuntu-release-upgrader-qt usb-creator-common usb-creator-kde wireless-tools wvdial x11-apps x11-session-utils xfonts-efont-unicode xinit xinput xorg xorg-docs-core xscreensaver xscreensaver-data xscreensaver-data-extra xscreensaver-gl xscreensaver-gl-extra acpi-support acpid apport-gtk apturl apturl-common avahi-autoipd bluez-cups brltty cups-bsd dc dmz-cursor-theme eog espeak-ng-data evince evince-common fonts-beng fonts-beng-extra fonts-deva fonts-deva-extra fonts-gargi fonts-gubbi fonts-gujr fonts-gujr-extra fonts-guru fonts-guru-extra fonts-indic fonts-kacst fonts-kacst-one fonts-kalapi fonts-khmeros-core fonts-knda fonts-lao fonts-liberation2 fonts-lklug-sinhala fonts-lohit-beng-assamese fonts-lohit-beng-bengali fonts-lohit-deva fonts-lohit-gujr fonts-lohit-guru fonts-lohit-knda fonts-lohit-mlym fonts-lohit-orya fonts-lohit-taml fonts-lohit-taml-classical fonts-lohit-telu fonts-mlym fonts-nakula fonts-navilu fonts-opensymbol fonts-orya fonts-orya-extra fonts-pagul fonts-sahadeva fonts-samyak-deva fonts-samyak-gujr fonts-samyak-mlym fonts-samyak-taml fonts-sarai fonts-sil-abyssinica fonts-sil-padauk fonts-smc fonts-smc-anjalioldlipi fonts-smc-chilanka fonts-smc-dyuthi fonts-smc-gayathri fonts-smc-karumbi fonts-smc-keraleeyam fonts-smc-manjari fonts-smc-meera fonts-smc-rachana fonts-smc-raghumalayalamsans fonts-smc-suruma fonts-smc-uroob fonts-taml fonts-telu fonts-telu-extra fonts-teluguvijayam fonts-thai-tlwg fonts-tibetan-machine fonts-tlwg-garuda fonts-tlwg-garuda-ttf fonts-tlwg-kinnari fonts-tlwg-kinnari-ttf fonts-tlwg-laksaman fonts-tlwg-laksaman-ttf fonts-tlwg-loma fonts-tlwg-loma-ttf fonts-tlwg-mono fonts-tlwg-mono-ttf fonts-tlwg-norasi fonts-tlwg-norasi-ttf fonts-tlwg-purisa fonts-tlwg-purisa-ttf fonts-tlwg-sawasdee fonts-tlwg-sawasdee-ttf fonts-tlwg-typewriter fonts-tlwg-typewriter-ttf fonts-tlwg-typist fonts-tlwg-typist-ttf fonts-tlwg-typo fonts-tlwg-typo-ttf fonts-tlwg-umpush fonts-tlwg-umpush-ttf fonts-tlwg-waree fonts-tlwg-waree-ttf fonts-yrsa-rasa fprintd gamemode gamemode-daemon gdm3 gir1.2-adw-1 gir1.2-atspi-2.0 gir1.2-gck-1 gir1.2-gcr-3 gir1.2-gdm-1.0 gir1.2-geoclue-2.0 gir1.2-gmenu-3.0 gir1.2-gnomebluetooth-3.0 gir1.2-graphene-1.0 gir1.2-gstreamer-1.0 gir1.2-gtk-4.0 gir1.2-gweather-3.0 gir1.2-javascriptcoregtk-4.0 gir1.2-mutter-10 gir1.2-snapd-1 gir1.2-webkit2-4.0 gir1.2-wnck-3.0 gjs gnome-bluetooth-3-common gnome-calculator gnome-characters gnome-font-viewer gnome-initial-setup gnome-logs gnome-menus gnome-session-bin gnome-session-canberra gnome-session-common gnome-shell gnome-shell-common gnome-shell-extension-appindicator gnome-shell-extension-desktop-icons-ng gnome-shell-extension-ubuntu-dock gnome-startup-applications gnome-system-monitor gstreamer1.0-alsa gstreamer1.0-packagekit gstreamer1.0-pipewire gstreamer1.0-plugins-base-apps gstreamer1.0-pulseaudio gstreamer1.0-tools hplip hplip-data ibus-table kerneloops laptop-detect ldap-utils libadwaita-1-0 libao-common libao4 libatk-adaptor libatkmm-1.6-1v5 libbasicobjects0 libbrlapi0.8 libcairo-gobject-perl libcairo-perl libcairomm-1.0-1v5 libcollection4 libcue2 libcupsimage2 libdee-1.0-4 libdhash1 libdotconf0 libespeak-ng1 libevdocument3-4 libevview3-3 libextutils-depends-perl libfprint-2-2 libgamemode0 libgamemodeauto0 libgdm1 libgexiv2-2 libgjs0g libglib-object-introspection-perl libglib-perl libglibmm-2.4-1v5 libgnome-autoar-0-0 libgnome-bg-4-1 libgnome-bluetooth-3.0-13 libgnome-desktop-4-1 libgnome-menu-3-0 libgtk3-perl libgtkmm-3.0-1v5 libgxps2 libhpmud0 libini-config5 libipa-hbac0 liblcms2-utils libmozjs-91-0 libnfsidmap1 libnotify-bin libnss-sss libpam-fprintd libpam-pwquality libpam-sss libpangomm-1.4-1v5 libpath-utils1 libpcaudio0 libpkcs11-helper1 libproxy1-plugin-gsettings libproxy1-plugin-networkmanager libref-array1 libsane-hpaio libsasl2-modules-gssapi-mit libsigc++-2.0-0v5 libsonic0 libspectre1 libsss-certmap0 libsss-idmap0 libsss-nss-idmap0 libsysmetrics1 libtotem-plparser-common libtotem-plparser18 libtracker-sparql-3.0-0 libunity-protocol-private0 libunity-scopes-json-def-desktop libunity9 libwmf-0.2-7-gtk libwmf0.2-7-gtk memtest86+ mousetweaks mscompress nautilus nautilus-sendto nautilus-share network-manager-config-connectivity-ubuntu network-manager-openvpn network-manager-openvpn-gnome network-manager-pptp-gnome openvpn orca pcmciautils printer-driver-brlaser printer-driver-c2esp printer-driver-foo2zjs printer-driver-foo2zjs-common printer-driver-hpcups printer-driver-m2300w printer-driver-min12xxw printer-driver-postscript-hp printer-driver-ptouch printer-driver-pxljr printer-driver-sag-gdi printer-driver-splix python3-brlapi python3-louis python3-pyatspi python3-renderpm python3-reportlab python3-reportlab-accel python3-speechd python3-sss seahorse software-properties-gtk sound-icons speech-dispatcher speech-dispatcher-audio-plugins speech-dispatcher-espeak-ng sssd sssd-ad sssd-ad-common sssd-common sssd-ipa sssd-krb5 sssd-krb5-common sssd-ldap sssd-proxy switcheroo-control systemd-oomd tracker tracker-extract tracker-miner-fs ubuntu-advantage-desktop-daemon ubuntu-desktop-minimal ubuntu-release-upgrader-gtk ubuntu-report ubuntu-session ubuntu-settings ubuntu-wallpapers ubuntu-wallpapers-jammy update-manager update-notifier xbitmaps xbrlapi xcursor-themes xdg-desktop-portal-gnome xdg-user-dirs-gtk xfonts-scalable xserver-xephyr xwayland yaru-theme-gnome-shell yaru-theme-gtk yaru-theme-icon yaru-theme-sound adcli appmenu-gtk2-module appmenu-registrar arctica-greeter arctica-greeter-guest-session aspell aspell-en atril atril-common ayatana-indicator-application ayatana-indicator-common ayatana-indicator-datetime ayatana-indicator-keyboard ayatana-indicator-messages ayatana-indicator-notifications ayatana-indicator-power ayatana-indicator-printers ayatana-indicator-session ayatana-indicator-sound ayatana-settings brltty-x11 caca-utils caja caja-admin caja-common caja-extensions-common caja-open-terminal caja-rename caja-sendto caja-wallpaper chafa diffstat enchant-2 engrampa engrampa-common eom eom-common flatpak fonts-cabin fonts-cantarell fonts-mathjax fonts-opendyslexic fonts-tiresias fortune-mod fortunes-min gdebi gdebi-core gir1.2-caja-2.0 gir1.2-eom-1.0 gir1.2-matemenu-2.0 gir1.2-pluma-1.0 gir1.2-xfconf-0 glew-utils gnome-icon-theme gsfonts gucharmap ideviceinstaller ifupdown ifuse intltool-debian iw jp2a libalgorithm-diff-perl libalgorithm-diff-xs-perl libalgorithm-merge-perl libaliased-perl libappmenu-gtk2-parser0 libappstream-glib8 libapt-pkg-perl libarchive-zip-perl libatrildocument3 libatrilview3 libauthen-sasl-perl libavahi-compat-libdnssd1 libayatana-common0 libb-hooks-endofscope-perl libb-hooks-op-check-perl libc-devtools libcaja-extension1 libcanberra-gtk-module libcanberra-gtk0 libcapture-tiny-perl libchafa0 libclass-data-inheritable-perl libclass-method-modifiers-perl libclass-xsaccessor-perl libconfig-tiny-perl libconfig9 libconfuse-common libconfuse2 libconst-fast-perl libcpanel-json-xs-perl libcpufreq0 libdata-dpath-perl libdata-dump-perl libdata-messagepack-perl libdata-optlist-perl libdata-validate-domain-perl libdata-validate-ip-perl libdata-validate-uri-perl libdbusmenu-gtk4 libdevel-callchecker-perl libdevel-size-perl libdevel-stacktrace-perl libdynaloader-functions-perl libemail-address-xs-perl libev4 libexception-class-perl libexporter-tiny-perl libfile-fcntllock-perl libfile-find-rule-perl libfont-afm-perl libfont-ttf-perl libgl1-amber-dri libglew2.2 libgtk-3-bin libgtk-layer-shell0 libgtksourceview-3.0-1 libgtksourceview-3.0-common libgucharmap-2-90-7 libhtml-form-perl libhtml-format-perl libhtml-html5-entities-perl libhttp-daemon-perl libimobiledevice-utils libimport-into-perl libio-interactive-perl libio-prompt-tiny-perl libio-string-perl libio-stringy-perl libipc-run3-perl libiterator-perl libiterator-util-perl libjs-mathjax libjson-maybexs-perl libjxr-tools libjxr0 liblist-compare-perl liblist-moreutils-perl liblist-moreutils-xs-perl liblist-someutils-perl liblist-someutils-xs-perl liblist-utilsby-perl libmailtools-perl libmalcontent-0-0 libmarco-private2 libmate-desktop-2-17 libmate-menu2 libmate-panel-applet-4-1 libmate-sensors-applet-plugin0 libmate-slab0 libmate-window-settings1 libmatedict6 libmatekbd-common libmatekbd4 libmatemixer-common libmatemixer0 libmateweather-common libmateweather1 libmath-base85-perl libmodule-implementation-perl libmodule-runtime-perl libmoo-perl libmoox-aliases-perl libmouse-perl libnamespace-clean-perl libnet-dbus-perl libnet-domain-tld-perl libnet-ipv6addr-perl libnet-netmask-perl libnet-smtp-ssl-perl libnetaddr-ip-perl libnumber-compare-perl libpackage-stash-perl libpackage-stash-xs-perl libparams-classify-perl libparams-util-perl libpath-tiny-perl libperlio-gzip-perl libperlio-utf8-strict-perl libplank-common libplank1 libplist-utils librda-common librda0 librecode0 librole-tiny-perl libsereal-decoder-perl libsereal-encoder-perl libsixel-bin libsixel1 libsocket6-perl libsort-versions-perl libstrictures-perl libsub-exporter-perl libsub-exporter-progressive-perl libsub-identify-perl libsub-install-perl libsub-name-perl libsub-quote-perl libsyntax-keyword-try-perl libtext-glob-perl libtext-levenshteinxs-perl libtext-markdown-discount-perl libtext-xslate-perl libtie-ixhash-perl libtime-duration-perl libtime-moment-perl libunicode-utf8-perl libvariable-magic-perl libx11-protocol-perl libxcb-ewmh2 libxml-parser-perl libxml-sax-expat-perl libxml-twig-perl libxml-xpathengine-perl libxpresent1 libxs-parse-keyword-perl libyaml-libyaml-perl lintian lzip lzop magnus manpages-dev marco marco-common mate-applet-appmenu mate-applet-brisk-menu mate-applets mate-applets-common mate-calc mate-calc-common mate-control-center mate-control-center-common mate-desktop mate-desktop-common mate-desktop-environment-core mate-hud mate-icon-theme mate-indicator-applet mate-indicator-applet-common mate-media mate-media-common mate-menus mate-notification-daemon mate-notification-daemon-common mate-optimus mate-panel mate-panel-common mate-polkit-common mate-polkit mate-power-manager mate-power-manager-common mate-screensaver mate-screensaver-common mate-sensors-applet mate-sensors-applet-common mate-session-manager mate-settings-daemon mate-settings-daemon-common mate-system-monitor mate-system-monitor-common mate-terminal mate-terminal-common mate-tweak mate-user-guide mate-utils mate-utils-common mate-window-applets-common mate-window-buttons-applet mate-window-menu-applet mate-window-title-applet mozo neofetch numlockx nvidia-prime onboard onboard-common onboard-data patchutils picom plank pluma pluma-common pppoeconf pulsemixer python-caja-common python3-caja python3-gpg python3-samba python3-tdb qt5-gtk2-platformtheme qt5-xdgdesktopportal-platformtheme realmd rofi samba-common samba-common-bin samba-dsdb-modules smbclient thermald tilda tlp tlp-rdw toilet toilet-fonts ubuntu-mate-artwork ubuntu-mate-core ubuntu-mate-default-settings ubuntu-mate-icon-themes ubuntu-mate-themes ubuntu-mate-wallpapers ubuntu-mate-wallpapers-common ubuntu-mate-wallpapers-jammy ubuntu-mate-wallpapers-photos unattended-upgrades vala-panel-appmenu-common w3m w3m-img xterm yaru-theme-unity adwaita-icon-theme-full doc-base elementary-xfce-icon-theme fonts-symbola gir1.2-libxfce4util-1.0 gnome-themes-standard greybird-gtk-theme libept1.6.0 libgarcon-1-0 libgarcon-common libgarcon-gtk3-1-0 libthunarx-3-0 libtumbler-1-0 libuuid-perl libxfce4panel-2.0-4 libxfce4ui-utils libyaml-tiny-perl lightdm-gtk-greeter numix-gtk-theme pavucontrol pinentry-gtk2 plymouth-theme-xubuntu-logo plymouth-theme-xubuntu-text shimmer-themes synaptic thunar thunar-data thunar-volman tumbler-common tumbler xcape xfce4-appfinder xfce4-helpers xfce4-indicator-plugin xfce4-notifyd xfce4-panel xfce4-power-manager xfce4-power-manager-data xfce4-power-manager-plugins xfce4-pulseaudio-plugin xfce4-screensaver xfce4-screenshooter xfce4-session xfce4-settings xfce4-statusnotifier-plugin xfce4-whiskermenu-plugin xfdesktop4 xfdesktop4-data xfwm4 xiccd xserver-xorg-input-synaptics xubuntu-artwork xubuntu-core xubuntu-default-settings xubuntu-docs xubuntu-wallpapers
          version: 1.0
      - name: Setup SSH key
        uses: webfactory/ssh-agent@v0.9.0
        with: 
          ssh-private-key: |
            ${{ secrets.PRIVATE_KEY_3 }}
      - name: Preparing ${{ inputs.desktop-env }}
        run: |
          git clone git@github.com:msh128/ubuntu-docker.git
          setup_env_and_files () {
            apt -qq update
            apt -qq full-upgrade
            apt -qq install -y aria2 curl dbus-x11 ffmpeg fuse3 htop inotify-tools jq less libchromaprint-tools mediainfo mkvtoolnix nano ncdu novnc openssh-client openssh-server parallel postgresql-client python3-pip python3-websockify qbittorrent-nox rename sudo sqlite3 tigervnc-standalone-server tigervnc-xorg-extension tmux tzdata unzip xfce4-terminal xserver-xorg-video-dummy
            case ${{ inputs.desktop-env }} in
              xubuntu-core|ubuntu-mate-core) apt -qq install -y ${{ inputs.desktop-env }}^;;
              lubuntu-desktop) apt -qq install -y ${{ inputs.desktop-env }} --no-install-recommends;;
              *) apt -qq install -y ${{ inputs.desktop-env }};;
            esac &
            pip install yt-dlp udocker &
            curl -s https://rclone.org/install.sh | bash &
            curl -sL -o /usr/local/bin/ttyd $(curl -s 'https://api.github.com/repos/tsl0922/ttyd/releases/latest' | jq -r '.assets[] | select(.name|contains("x86_64")).browser_download_url')
            mkdir -p /opt/teldrive
            curl -sL $(curl -s 'https://api.github.com/repos/divyam234/teldrive/releases/latest' | jq -r '.assets[] | select(.name|contains("linux-amd64")).browser_download_url') | tar xz -C /opt/teldrive teldrive && curl -sLO $(curl -s 'https://api.github.com/repos/divyam234/rclone/releases/latest' | jq -r '.assets[] | select(.name|contains("linux-amd64.zip")).browser_download_url')
            unzip -qq rclone-*.zip
            mv rclone-*/rclone* /opt/teldrive/
            rm -rf rclone-*
            curl -sL 'https://prowlarr.servarr.com/v1/update/master/updatefile?os=linux&runtime=netcore&arch=x64' | tar xz -C /opt
            chmod a+x /usr/local/bin/ttyd /opt/teldrive/teldrive /opt/teldrive/rclone /opt/Prowlarr/Prowlarr
            adduser --disabled-password --gecos '' ubuntu
            adduser ubuntu sudo
            echo 'ubuntu ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers
            su - ubuntu -c 'udocker pull xhofe/alist:latest && udocker create --name=alist xhofe/alist:latest; udocker pull dpage/pgadmin4:latest && udocker create --name=pgadmin4 dpage/pgadmin4:latest' &
            mkdir -p /mnt/{musahi0128,drive,drive1}
            su - ubuntu -c 'mkdir -p /home/ubuntu/{Desktop,Documents,Music,Pictures,Videos,Downloads}'
            mv -v ubuntu-docker/systemd/* /etc/systemd/system/
            rclone move -L ubuntu-docker/home /home/ubuntu
            chown ubuntu:ubuntu -R /mnt /opt/teldrive /opt/Prowlarr /home/ubuntu
            chmod 600 /home/ubuntu/.ssh/*
            wait
            [ -f /etc/gdm3/custom.conf ] && sed -i 's/^#.*WaylandEnable=.*/WaylandEnable=false/' /etc/gdm3/custom.conf || true
            sed -i 's/tigervncconfig -iconic/#tigervncconfig -iconic/g' /etc/X11/Xtigervnc-session
            rclone size /var/apt/cache
          }
          sudo bash -c "$(declare -f setup_env_and_files); setup_env_and_files"
      - name: Launch instance
        run: |
          launch_instance () {
            echo "$GH_REPO_TOKEN" > /home/ubuntu/.gh-repo-token && chmod 600 /home/ubuntu/.gh-repo-token && chown ubuntu:ubuntu /home/ubuntu/.gh-repo-token
            sudo systemctl start sshd srv.us ssh-j ttyd
            sudo systemctl start rclone-mounts
            sudo systemctl start alist pgadmin4 prowlarr
            sudo systemctl start qbittorrent-nox teldrive teldrive-webdav config-sync
            sudo systemctl start vncserver novnc
          } > /dev/null 2>&1
          ntfy_message () {
            echo Ubuntu on GitHub Action
            echo ""
            echo Connect via srv.us:
            sudo journalctl -u srv.us -g 'https://' -o cat --no-pager
            echo ""
            echo Connect via ssh-j.com:
            echo "ssh ${SSH_J_USERNAME}@ssh-j.com -N -L 127.0.4.1:22:${SSH_J_HOSTNAME}:22 -L 127.0.4.1:7681:${SSH_J_HOSTNAME}:7681 -L 127.0.4.1:8081:${SSH_J_HOSTNAME}:8081 -L 127.0.4.1:9696:${SSH_J_HOSTNAME}:9696 -L 127.0.4.1:8082:${SSH_J_HOSTNAME}:8082 -L 127.0.4.1:8083:${SSH_J_HOSTNAME}:8083 -L 127.0.4.1:5432:${SSH_J_HOSTNAME}:5432 -L 127.0.4.1:5244:${SSH_J_HOSTNAME}:5244 -L 127.0.4.1:5901:${SSH_J_HOSTNAME}:5901 -L 127.0.4.1:6080:${SSH_J_HOSTNAME}:6080"
          }
          launch_instance && echo "All good." || echo "Something's wrong"
          curl -s -d "$(ntfy_message)" ntfy.sh/$NTFY > /dev/null 2>&1
      - name: Wait for stop signals
        shell: bash
        run: |
          for a in {1..330}; do echo "Random GUID: $(curl -s https://www.uuidgenerator.net/api/guid)" && sleep 58; done &
          while [ ! -f /tmp/poweroff ]; do sleep 3; done
          echo Stop signal received
          echo Stopping services
          stop_services () {
            sudo systemctl stop vncserver novnc
            sudo systemctl stop qbittorrent-nox teldrive teldrive-webdav
            sudo systemctl stop alist pgadmin4 prowlarr
            sudo systemctl stop rclone-mounts
            sudo systemctl stop config-sync
          }
          stop_services && echo Services stopped sucesfully || echo "Something's wrong"
          exit
